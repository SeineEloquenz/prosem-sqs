%! Suppress = Unicode
\documentclass[a4paper,UKenglish,cleveref, autoref]{templates/lipics-v2019}
\usepackage{csquotes}
\usepackage{url}
\usepackage{pgfplots}
\usepackage{float}
%This is a template for producing LIPIcs articles.
%See lipics-manual.pdf for further information.
%for A4 paper format use option "a4paper", for US-letter use option "letterpaper"
%for british hyphenation rules use option "UKenglish", for american hyphenation rules use option "USenglish"
%for section-numbered lemmas etc., use "numberwithinsect"
%for enabling cleveref support, use "cleveref"
%for enabling cleveref support, use "autoref"

\include{commands}

\graphicspath{{./graphics/}}%helpful if your graphic files are in another directory

\bibliographystyle{plainurl}% the mandatory bibstyle

\title{M10: \sqss}

\titlerunning{M10: \sqss}%optional, please use if title is longer than one line

\author{Alexander Linder}{Karlsruhe Institute of Technology, Germany \and \url{https://kit.edu} }{alexander.linder@student.kit.edu}{}{}
%mandatory, please use full name; first two parameters are mandatory, other parameters can be empty.

\authorrunning{A. Linder}
%mandatory. First: Use abbreviated first/middle names. Second (only in severe cases): Use first author plus 'et al.'

\Copyright{Alexander Linder}
%%mandatory, please use full first names. LIPIcs license is "CC-BY";  http://creativecommons.org/licenses/by/3.0/

\ccsdesc[100]{General and reference}
%mandatory: Please choose ACM 2012 classifications from https://dl.acm.org/ccs/ccs_flat.cfm

\keywords{\misra, \sqss}
%mandatory; please add comma-separated list of keywords

\category{}
%optional, e.g. invited paper

\relatedversion{}
%optional, e.g. full version hosted on arXiv, HAL, or other respository/website

\supplement{}
%optional, e.g. related research data, source code, ... hosted on a repository like zenodo, figshare, GitHub, ...

\funding{}
%optional, to capture a funding statement, which applies to all authors. Please enter author specific funding statements as fifth argument of the \author macro.

\acknowledgements{}
%optional

\nolinenumbers %uncomment to disable line numbering

\hideLIPIcs  %uncomment to remove references to LIPIcs series (logo, DOI, ...), e.g. when preparing a pre-final version to be uploaded to arXiv or another public repository

%Editor-only macros:: begin (do not touch as author)%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\EventEditors{}
\EventNoEds{0}
\EventLongTitle{Proseminar Werkzeuge und Methoden der Software-Analyse}
\EventShortTitle{Proseminar}
\EventAcronym{Proseminar}
\EventYear{2019}
\EventDate{WS19/20}
\EventLocation{Karlsruhe, Deutschland}
\EventLogo{}
\SeriesVolume{}
\ArticleNo{M10}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

    \maketitle

    %TODO mandatory: add short abstract of the document
    \begin{abstract}
        Diese Arbeit gibt einen Überblick über \sqss\ im Allgemeinen sowie unter besonderer Betrachtung eines weitverbreiteten Beispiels, \misra\ 2004.\\
        Es wird die hinter \sqss\ stehende Motivation dargebracht, sowie betrachtet wie sich Regeln innerhalb eines Standards sinnvoll klassifizieren lassen.
        Dies führt zum Begriff des \slss\ nach Hatton~\cite{hatton2004safer}, welches formale Forderungen an einen guten Regelsatz aufstellt.
        Weiterhin wird überprüft, inwiefern \misra\ diese Definition erfüllt.\\
        Final sollen Gütekriterien für \sqss\ aufgestellt werden und die Güte des \misra\ Standards unter eben diesen Kriterien bewertet werden.
    \end{abstract}

    \section{Einleitung}
    \label{sec:einleitung}

    \section{\misra}
    \label{sec:misra-c}
    \misra\ ist ein weitverbreiteter \sqs, der von der \textbf{M}otor \textbf{I}ndustry \textbf{S}oftware \textbf{R}eliability \textbf{A}ssociation (MISRA) entwickelt wurde.
    Die erste Version von \misra\ wurde 1998 veröffentlicht, mit insgesamt zwei großen Revisionen einmal 2004 sowie 2012,
    wobei sich diese Arbeit auf die Standards von 1998 (künftig M1998) und 2004 (künftig M2004) beschränkt, da einerseits der Standard von 2004 nach wie vor
    weite Verbreitung findet und sich andererseits die Forschung auf diese beiden Versionen konzentriert.\\
    Bei \misra\ handelt es sich um den de facto Standard zur Programmierung eingebetteter Systeme in der Mehrheit der sicherheitsrelevanten Industrien in der Programmiersprache C\@.\cite{misra-website}
    Sowohl M1998 als auch M2004 nehmen Bezug nehmen Bezug auf C89/90 und nicht auf den neueren C-Standard C99 (ISO/IEC9899:1999), was dazu führt, dass neuere Sprachkonstrukte in
    \misra-konformem Code nicht erlaubt sind, auch wenn die verwendeten Compiler sie unterstützen.

    \subsection{Evolution des Standards}
    \label{subsec:evolution-des-standards}

    \begin{figure}[H]
        \centering
        \captionsetup{justification=centering,margin=2cm}
        \include{graphics/pie1998-2004}
        \caption{Regelanzahl 1998 vs 2004}
    \end{figure}

    \subsection{Beispielregel}
    \label{subsec:beispielregel}

    \noindent
    \begin{minipage}{\linewidth}
        \begin{example}
            \textbf{Rule 2.1 (required): Assembly language shall be encapsulated and isolated\cite{MISRA2004}}\\
            Where assembly language instructions are required it is recommended that they be encapsulated
            and isolated in either (a) assembler functions, (b) C functions or (c) macros.\\
            For reasons of efficiency it is sometimes necessary to embed simple assembly language instructions
            in-line, for example to enable and disable interrupts.
            If it is necessary to do this for any reason, then it is recommended that it be achieved by using macros.\\
            Note that the use of in-line assembly language is an extension to standard C, and therefore also
            requires a deviation against Rule 1.1.
            \begin{lstlisting}[language=C]
                #define NOP asm(" NOP")
            \end{lstlisting}
        \end{example}
    \end{minipage}

    \section{Regelklassifizierung}
    \label{sec:regelklassifizierung}
    In diesem Abschnitt wollen wir untersuchen, wie wir Regeln eines Regelsatzes sinnvoll klassifizieren können.
    Hierfür gibt es viele verschiedene Möglichkeiten.
    Im vorigen Abschnitt haben wir bereits gesehen, wie der Regelsatz von \misra\ organisiert wird.
    Hierbei handelte es sich schlicht um eine thematische Organisation der Regeln in Gruppen.
    Wir wollen nun eine alternative Klassifikationsart betrachten, die nicht auf dem Inhalt der Regeln, sondern auf ihrer
    Art sowie dem Grad an Evidenz, der ihre Existenz begründet, basiert.
    Regeln werden in diesem System in drei Typen unterschieden, einserseits Typ-A (\enquote{Style-basierte}) Regeln,
    sowie Typ-B (\enquote{funktionale}) Regeln, welche sich weiter in Typ-B.1 (\enquote{Subjektive}) sowie
    Typ B.2 (\enquote{Evidente}) unterscheiden lassen.\cite{hatton2004safer}\\
    Im Folgenden wollen wir uns die verschiedenen Regelklassen je an einem Beispiel für eine Regel sowie ihre Verletzung
    genauer ansehen.
    Alle verwendeten Beispielregeln stammen hierbei aus \misra.

    \subsection{Typ-A Regeln}
    \label{subsec:typ-a-regeln}
    \begin{definition}
        Eine Typ-A Regel sei eine Regel, welche alleinig den Stil des Codes beeinflusst.
    \end{definition}

    Ein Beispiel für eine Typ-A Regel stellt Regel 5.7 \textit{No identifier name should be reused}
    (Kein Variablenname soll wiederverwendet werden)\cite{MISRA2004} dar.
    Betrachten wir folgendes Code-Beispiel:

    \noindent
    \begin{minipage}{\linewidth}
        \begin{example}
            \lstinputlisting[title=\ ]{graphics/typa.c}
        \end{example}
    \end{minipage}

    Im Beispiel besitzen die Structs \textit{air\_speed} und \textit{gnd\_speed} je eine Membervariable \textit{speed}.
    Durch die unterschiedlichen Einheiten für Geschwindigkeit in der Luft bzw.\ am Boden besteht hier eine potentielle
    Fehlerquelle.
    Durch Umbenennung der Variablen in bspw.\ \textit{speed\_knots} und \textit{speed\_kmh} kann diese ausgeräumt werden,
    da klar wird, dass eine Konversion der Geschwindigkeiten stattfinden muss, bevor diese gemeinsam verwendet, bspw.\ verglichen,
    werden können.
    Ungeachtet dieser Fehlerquelle handelt es sich jedoch um ein rein stilistisches Problem, weshalb diese Regel in
    Kategorie A fällt.

    \subsection{Typ-B.1 Regeln}
    \label{subsec:typ-b-1-regeln}
    \begin{definition}
        Eine Typ-B.1 Regel sei eine Regel, welche potentiell unsichere Sprachfeatures ausschließt,
        jedoch keine empirischen Daten besitzt, die diesen Ausschluss begründen.
    \end{definition}

    Das klassische Beispiel schlechthin für eine Typ-B.1 Regel stellt Regel 14.4 \textit{The goto statement shall not be used}
    (Die goto Anweisung soll nicht verwendet werden)\cite{MISRA2004} dar.
    Betrachten wir einmal folgendes Beispiel einer noch recht konservativen Verwendung des \textit{goto} rein zur
    Fehlerbehandlung:

    \noindent
    \begin{minipage}{\linewidth}
        \begin{example}
            \lstinputlisting[title=\ ]{graphics/typb1.c}
        \end{example}
    \end{minipage}

    Im Falle dass \textit{some Condition} eintritt, springt die Programmausführung zur Sprungmarke \textit{error}.
    Diese ist in einer \enquote{\textit{goto}-freien} Ausführung nicht erreichbar, da sie nach der ersten \textit{return}
    Anweisung steht.
    Wollen wir die Programmausführung analysieren müssen wir somit alle Verwendungen von \textit{goto} finden,
    um zu verstehen wann die \textit{error} Marke erreicht wird.
    \textit{Goto} erhöht damit die Komplexität von Programmen enorm, indem es die Lücke zwischen statischem
    Quelltext und darauf basierender Programmausführung vergrößert.\cite{goto-harmful}
    Eine empirische Datenbasis liefert uns diese Intuition nicht, dennoch enthält nahezu jeder \sqs\ eine Regel dieser
    Form.\cite{hatton2004safer}\\
    Es handelte sich damit lange um \textit{das} Beispiel schlechthin für Typ-B.1 Regeln.
    Die von Hatton beschriebene klare Absenz von faktischer Untermauerung muss jedoch insofern in Frage gestellt werden,
    dass der Autor eine Analyse der Auswirkung von \textit{goto} in Cobol-Programmen fand, die eine Korrelation der
    Nutzung von \textit{goto} mit geringerer Programmqualität nahelegt.\cite{goto-study}
    Mit weiterer Faktenuntermauerung könnte unser Beispiel damit auch in die Kategorie B.2 wandern, die im Folgenden
    betrachtet wird.
    
    \subsection{Typ-B.2 Regeln}
    \label{subsec:typ-b-2-regeln}
    \begin{definition}
        Eine Typ-B.2 Regel sei eine Regel, welche potentiell unsichere Sprachfeatures ausschließt und empirische
        Daten besitzt, die diesen Ausschluss begründen.
    \end{definition}

    Typ-B.2 Regeln stellen damit sozusagen den \enquote{Goldstandard} für Regeln in einem \sqs\ dar.
    Sie sind weder rein stilistisch wie Typ-A Regeln, noch begründen sie sich auf Intuition wie Typ-B.1 Regeln.
    Betrachten wir im Folgenden die Regel 9.1 \textit{All automatic variables shall have been asigned a value before being used}
    (Alle lokalen Variablen müssen vor Benutzung initialisiert werden).\cite{MISRA2004}

    \noindent
    \begin{minipage}{\linewidth}
        \begin{example}
            \lstinputlisting[title=\ ]{graphics/typb2.c}
        \end{example}
    \end{minipage}

    Im dargestellten Listing wird eine Variable \textit{speed} deklariert aber nicht initialisiert.
    Der erweiternde Erklärungstext zu Regel 9.1 erlaubt eine spätere Initialisierung ausdrücklich, verlangt jedoch, dass
    in jedem Fall die Variable vor einem lesenden Zugriff beschrieben werden muss.\cite{MISRA2004}
    Dies ist hier offensichtlich nicht der Fall, da \textit{speed} nur im Falle dass \textit{some Condition} eintritt auf
    \textit{101} gesetzt wird, andernfalls bleibt ihr Wert undefiniert.
    Damit ist ab dem lesenden Zugriff in der darauffolgenden If-Abfrage das Verhalten des Programms potentiell undefiniert.
    Es ist bereits intuitiv klar, warum es sich hierbei um eine Fehlerquelle handelt, jedoch gibt es hierzu auch explizit
    empirische Fehlerdaten, wie von Hatton dargelegt.\cite{hatton2004safer}
    
    \section{Safer Language Subsets}
    \label{sec:safer-language-subsets}
    \begin{definition}
        Ein Regelsatz $R$ sei ein \sls $\iff$
        \begin{itemize}
            \item $R$ enthält nur Typ B.2 Regeln als verpflichtende Regeln
            \item $R$ enthält nur Typ B.1 Regeln als empfohlene Regeln
            \item $R$ enthält keinerlei Typ A Regeln
        \end{itemize}
        
    \end{definition}
    
    \section{Bewertung}
    \label{sec:bewertung}

    \subsection{Signal-Rausch-Rate}
    \label{subsec:signal-rausch-rate}

    \begin{definition}
        Die Prävalenz (\enquote{base rate}) mit der bekannte Fehlerquellen von Programmiersprachen auftreten bezeichnen wir mit $B$.
    \end{definition}

    \begin{definition}
        Die Erkennungsrate (\enquote{detection rate}) eines Standards ist die gesamte Anzahl an Abweichungen pro 1000 Zeilen
        ausführbaren Codes gemeint ist.
        Wir bezeichnen sie mit $D$.
    \end{definition}
    
    \begin{definition}
        Wir definieren die Signal-Rausch-Rate $S$, also die Rate in der bekannte Defekte gefunden werden, als:
        \begin{equation*}
            S=B/D
        \end{equation*}
    \end{definition}

    \begin{figure}[H]
        \centering
        \captionsetup{justification=centering,margin=2cm}
        \includegraphics[width=\textwidth]{graphics/1998-transgression-rates.png}
        \caption{Verstöße in Warnungen je 1000 Codezeilen auf 7 Pakete verteilt, M1998\cite{hatton2007language}}
    \end{figure}

    \begin{figure}[H]
        \centering
        \captionsetup{justification=centering,margin=2cm}
        \includegraphics[width=\textwidth]{graphics/2004-transgression-rates.png}
        \caption{Verstöße in Warnungen je 1000 Codezeilen auf 7 Pakete verteilt, M2004\cite{hatton2007language}}
    \end{figure}

    \section{Konklusion}
    \label{sec:konklusion}

    %%
    %% Bibliography
    %%

    %% Please use bibtex,

    \bibliography{prosem}

\end{document}
